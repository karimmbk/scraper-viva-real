// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-3.0
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"3vUp":function(e,t,a){"use strict";a.r(t);var r=a("/MKj"),n=a("lwsE"),u=a.n(n),c=a("W8MJ"),o=a.n(c),i=a("7W2i"),l=a.n(i),s=a("a1gu"),m=a.n(s),h=a("Nsbk"),p=a.n(h),d=a("lSNA"),f=a.n(d),y=a("U+yc"),b=a.n(y),O=a("CB4y"),g=a("17x9"),v=a.n(g),C=a("q1tI"),D=a.n(C),j=a("J4zp"),N=a.n(j),E=a("KFoM"),k=a("9P9J"),w=a("Hidz"),R=a("CmTO"),x=a("dqkN"),P=a("DZ3n"),Y=a("A7wo"),I=a("lDQi"),H=a("3pFk"),S=a("bCQf");function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=Object(x.a)(R.b),_=Object(r.c)((function(e,t){return q(q({},t),{},{areItemsFetching:Object(I.H)(e,t),error:Object(I.a)(e,t),url:H.l(e,t)})}),(function(e,t){return{onCancelExpandedListValidation:function(){},onClickOutside:function(){return e(Object(Y.j)())},onHoverCapture:function(t){return e(Object(Y.g)(t))},onNextDay:function(){return e(Object(Y.c)())},onPreviousDay:function(){return e(Object(Y.d)())},onValidateExpandedList:function(t){var a=t.date,r=t.url;return e(Object(P.e)({day:Object(S.a)(a),url:r}))}}}))(T),U=a("rXCy"),A=function(e){return function(t,a){return e.every((function(e){return a[e]===t[e]}))}},J=a("Jok1"),G=a("FGe3"),B=a("+q9O"),F=a("7lOs"),L=a("yLV6"),V=a.n(L),W=a("rJga"),z=a("GWeM");function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=p()(e);if(t){var n=p()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var Q=function(e){l()(a,e);var t=K(a);function a(){return u()(this,a),t.apply(this,arguments)}return o()(a,[{key:"shouldComponentUpdate",value:function(e){return e.date.getTime()!==this.props.date.getTime()||e.isHighlighted!==this.props.isHighlighted}},{key:"render",value:function(){var e=this.props.isHighlighted;return D.a.createElement(D.a.Fragment,null,D.a.createElement(Z,this.props),e&&D.a.createElement(W.a,null,(function(e){var t=e.ref;return D.a.createElement("div",{className:"calendar-day-reference",ref:t})})))}}]),a}(D.a.Component);f()(Q,"displayName","CalendarDay"),f()(Q,"propTypes",{date:v.a.object.isRequired,day:v.a.object.isRequired,index:v.a.number.isRequired,isHighlighted:v.a.bool,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,url:v.a.string.isRequired,onHoverDay:v.a.func.isRequired});var X=function(e){return e.preventDefault()},Z=function(e){var t=e.date,a=e.day,r=e.index,n=e.isHighlighted,u=e.maxNumberOfCaptures,c=e.minNumberOfCaptures,o=e.url,i=e.onHoverDay;if(!a||!("cn"in a))return r;var l,s=Object(S.a)(t),m=Object(z.a)(s,o),h=15+50*(Math.log(a.cn+1)-c)/Math.max(1,u-c);l="number"==typeof a.st?"s".concat(Math.floor(a.st/100),"xx"):"";var p=n?"highlighted":"",d=Object(C.useCallback)((function(){return i(Object(B.a)(t))}),[i,t]),f=Object(C.useRef)();return Object(C.useEffect)((function(){var e=new V.a(f.current);return e.on("tap",(function(){return i(Object(B.a)(t))})),function(){e.stop(),e.destroy()}}),[f]),D.a.createElement("div",{className:"calendar-day ".concat(p),ref:f,onTouchStart:X,onTouchEnd:X,onMouseOver:d},D.a.createElement("div",{className:"position",style:{width:h+"px",height:h+"px"}},D.a.createElement("div",{className:"measure ".concat(l)})),D.a.createElement("a",{href:m},r))};Z.displayName="CalendarDayContent",Z.propTypes={date:v.a.object.isRequired,day:v.a.object.isRequired,index:v.a.number.isRequired,isHighlighted:v.a.bool,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,url:v.a.string.isRequired,onHoverDay:v.a.func.isRequired};var $=Object(C.memo)(Q);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=p()(e);if(t){var n=p()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var te=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],ae=function(e){l()(a,e);var t=ee(a);function a(){return u()(this,a),t.apply(this,arguments)}return o()(a,[{key:"shouldComponentUpdate",value:function(e){var t=this;return["highlighted","weeksData","weeksInProgress","monthIndex","url","year"].some((function(a){return e[a]!==t.props[a]}))}},{key:"render",value:function(){var e=this.props,t=e.highlighted,a=e.maxNumberOfCaptures,r=e.minNumberOfCaptures,n=e.weeksData,u=e.weeksInProgress,c=e.monthIndex,o=e.url,i=e.year,l=e.onHoverDay,s=0;return D.a.createElement("div",{className:"month"},D.a.createElement("div",{className:"month-title"},te[c]),D.a.createElement("div",{className:"month-body"},u?D.a.createElement("div",null,D.a.createElement(G.a,null)):n.map((function(e,n){return D.a.createElement("div",{className:"month-week",key:n},e.map((function(e,n){if(!e)return D.a.createElement("div",{className:"month-blank-day-container",key:n});++s;var u=Object(F.a)(i,c,s),m=Object(B.a)(u),h=!!t&&t.dayOfYear===m,p=h?"highlighted":"";return D.a.createElement("div",{className:"month-day-container ".concat(p),onMouseOver:function(e){h&&e.stopPropagation()},key:n},e&&D.a.createElement($,{date:u,day:e,index:s,isHighlighted:h,minNumberOfCaptures:r,maxNumberOfCaptures:a,url:o,onHoverDay:l}))})))}))))}}]),a}(D.a.Component);f()(ae,"displayName","CalendarMonth"),f()(ae,"propTypes",{highlighted:v.a.object,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,weeksData:v.a.any,weeksInProgress:v.a.bool,monthIndex:v.a.number.isRequired,url:v.a.string,year:v.a.number.isRequired,onHoverDay:v.a.func.isRequired});var re="ontouchstart"in document.documentElement,ne=function(){},ue=function(e){var t=e.captures,a=e.highlighted,r=e.highlightedDay,n=e.highlightedDayData,u=e.highlightedDayDataItems,c=e.maxNumberOfCapturesInOneDayOfYear,o=e.minNumberOfCapturesInOneDayOfYear,i=e.url,l=e.year,s=e.onHoverDay,m=e.onRollOutDay,h=Object(U.a)({onRun:m}),p=N()(h,3),d=p[0],f=p[1],y=p[2],b=Object(C.useCallback)((function(e){re||f(),s(e)}));return D.a.createElement(E.c,null,D.a.createElement("div",{className:"calendar-grid"},t&&t.map((function(e,t){return D.a.createElement(ae,{key:t,highlighted:a.month===t?a:null,maxNumberOfCaptures:c,minNumberOfCaptures:o,weeksData:e&&"weeks"in e?e.weeks:e,weeksInProgress:!!e&&e.inProgress,monthIndex:t,url:i,year:l,onHoverDay:b})}))),n&&D.a.createElement(k.a,{placement:"bottom-start",highlighted:a,modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!0,boundariesElement:document.documentElement}}},(function(e){var t=e.ref,a=e.style,c=e.placement,o=e.arrowProps,i=e.scheduleUpdate;return D.a.createElement(D.a.Fragment,null,D.a.createElement(J.a,{value:n,onChange:i}),D.a.createElement(J.a,{value:u,onChange:i}),D.a.createElement(_,{arrowRef:o.ref,arrowStyle:o.style,popperRef:t,popperStyle:a,popperPlacement:c,currentDay:r,items:u,total:n.total,onMouseOver:re?ne:f,onNewCaptures:i}))})),d&&D.a.createElement(w.a,{onMouseOver:y}))};ue.displayName="CalendarGridAnnualData",ue.propTypes={captures:v.a.array,highlighted:v.a.object,highlightedDay:v.a.object,highlightedDayData:v.a.any,highlightedDayDataItems:v.a.array,maxNumberOfCapturesInOneDayOfYear:v.a.number,minNumberOfCapturesInOneDayOfYear:v.a.number,url:v.a.string,year:v.a.number,onHoverDay:v.a.func.isRequired,onRollOutDay:v.a.func.isRequired};var ce=D.a.memo(ue,A(["captures","highlighted","highlightedDay","highlightedDayData","highlightedDayDataItems","maxNumberOfCapturesInOneDayOfYear","minNumberOfCapturesInOneDayOfYear","url","year"])),oe=Object(r.c)((function(e,t){return{captures:Object(I.h)(e,t),highlighted:Object(I.n)(e,t),highlightedDay:Object(I.o)(e,t),highlightedDayData:Object(I.p)(e,t),highlightedDayDataItems:Object(I.b)(e,t),maxNumberOfCapturesInOneDayOfYear:Object(I.r)(e,t),minNumberOfCapturesInOneDayOfYear:Object(I.t)(e,t),url:H.l(e,t),year:Object(I.x)(e,t)}}),(function(e,t){return{onHoverDay:function(t){return e(Object(Y.b)(t))},onRollOutDay:function(t){return e(Object(Y.j)())}}}))(ce),ie=a("ob4f"),le=a("HX93"),se=a("429l"),me=function(e){var t=e.highlighted,a=e.maxNumberOfCaptures,r=e.minNumberOfCaptures,n=e.month,u=e.monthData,c=e.url,o=(e.week,e.year),i=e.onHoverDay,l=0;return u.map((function(e,u){return D.a.createElement("div",{className:"month-week",key:u},e.map((function(e,u){if(!e)return D.a.createElement("div",{className:"month-blank-day-container",key:u});++l;var s=Object(F.a)(o,n,l),m=Object(B.a)(s),h=!!t&&t.dayOfYear===m,p=h?"highlighted":"";return D.a.createElement("div",{className:"month-day-container ".concat(p),key:u},e&&D.a.createElement($,{date:s,day:e,index:l,isHighlighted:h,minNumberOfCaptures:r,maxNumberOfCaptures:a,url:c,onHoverDay:i}))})))}))};me.displayName="MonthGrid",me.propTypes={highlighted:v.a.object,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,month:v.a.number.isRequired,url:v.a.string,monthData:v.a.array,year:v.a.number.isRequired,onHoverDay:v.a.func};var he=function(e){var t=e.hasCaptures,a=e.highlighted,r=e.maxNumberOfCaptures,n=e.minNumberOfCaptures,u=e.month,c=e.monthScheme,o=e.weeksData,i=e.weeksError,l=e.weeksInProgress,s=e.url,m=e.year,h=e.onHoverDay,p=e.onMissedCaptures,d=Object(C.useCallback)((function(){return p(u)}),[u]);return Object(C.useEffect)((function(){!t||o||l||p(u)}),[t,s,m]),D.a.createElement("div",{className:"month"},D.a.createElement("div",{className:"month-title"},le.b[u]),D.a.createElement("div",{className:"month-body"},i?D.a.createElement("div",{className:"month-body-container"},D.a.createElement(me,{highlighted:a,maxNumberOfCaptures:r,minNumberOfCaptures:n,month:u,url:s,monthData:c,year:m,onHoverDay:h}),D.a.createElement("div",{className:"caption-container"},D.a.createElement(se.b,{className:"error-and-retry",error:i,onRetry:d}))):l?D.a.createElement("div",{className:"month-body-container"},D.a.createElement(me,{highlighted:a,maxNumberOfCaptures:r,minNumberOfCaptures:n,month:u,url:s,monthData:c,year:m,onHoverDay:h}),D.a.createElement("div",{className:"caption-container"},D.a.createElement("span",{className:"caption"},"loading..."))):D.a.createElement(me,{highlighted:a,maxNumberOfCaptures:r,minNumberOfCaptures:n,month:u,url:s,monthData:o||c,year:m,onHoverDay:h})))};he.displayName="CalendarMonth",he.propTypes={hasCaptures:v.a.bool.isRequired,highlighted:v.a.object,maxNumberOfCaptures:v.a.number,minNumberOfCaptures:v.a.number,month:v.a.number.isRequired,monthScheme:v.a.array,weeksData:v.a.any,weeksError:v.a.string,weeksInProgress:v.a.bool,url:v.a.string,year:v.a.number.isRequired,onHoverDay:v.a.func.isRequired,onMissedCaptures:v.a.func.isRequired};var pe=D.a.memo(he,A(["hasCaptures","highlighted","maxNumberOfCaptures","minNumberOfCaptures","month","monthScheme","weeksData","weeksError","weeksInProgress","url","year"])),de=Object(r.c)((function(e,t){return{maxNumberOfCaptures:Object(I.s)(e,t),minNumberOfCaptures:Object(I.u)(e,t),url:H.l(e,t),weeksData:Object(I.f)(e,t),weeksError:Object(I.e)(e,t),weeksInProgress:Object(I.I)(e,t),year:Object(I.x)(e,t)}}),(function(e,t){return{onMissedCaptures:function(t){return e(Object(P.j)(t))}}}))(pe),fe="ontouchstart"in document.documentElement,ye=function(){},be=function(e){var t=e.calendarScheme,a=e.highlighted,r=e.highlightedDay,n=e.highlightedDayData,u=e.highlightedDayDataItems,c=e.numOfCapturePerMonth,o=e.year,i=e.onHoverDay,l=e.onRollOutDay,s=Object(U.a)({onRun:l}),m=N()(s,3),h=m[0],p=m[1],d=m[2],f=Object(C.useCallback)((function(e){fe||p(),i(e)}));return D.a.createElement(E.c,null,D.a.createElement("div",{className:"calendar-grid"},t&&t.map((function(e,t){return D.a.createElement(ie.a,{key:"".concat(o).concat(t),triggerOnce:!0},(function(r){var n=r.inView,u=r.ref;r.entry;return D.a.createElement("div",{ref:u},n?D.a.createElement(de,{key:t,hasCaptures:c[t]>0,highlighted:a.month===t?a:null,month:t,monthScheme:e,onHoverDay:f}):D.a.createElement("div",{className:"month"}))}))}))),n&&D.a.createElement(k.a,{placement:"bottom-start",highlighted:a,modifiers:{hide:{enabled:!1},preventOverflow:{enabled:!0,boundariesElement:document.documentElement}}},(function(e){var t=e.ref,a=e.style,c=e.placement,o=e.arrowProps,i=e.scheduleUpdate;return D.a.createElement(D.a.Fragment,null,D.a.createElement(J.a,{value:n,onChange:i}),D.a.createElement(J.a,{value:u,onChange:i}),D.a.createElement(_,{arrowRef:o.ref,arrowStyle:o.style,popperRef:t,popperStyle:a,popperPlacement:c,currentDay:r,items:u,total:n.total,onMouseOver:fe?ye:p,onNewCaptures:i}))})),h&&D.a.createElement(w.a,{onMouseOver:d}))};be.displayName="CalendarGridMonthlyData",be.propTypes={calendarScheme:v.a.array,highlighted:v.a.object,highlightedDay:v.a.object,highlightedDayData:v.a.any,highlightedDayDataItems:v.a.array,numOfCapturePerMonth:v.a.array,year:v.a.number,onHoverDay:v.a.func,onRollOutDay:v.a.func};var Oe=D.a.memo(be,A(["calendarScheme","highlighted","highlightedDay","highlightedDayData","highlightedDayDataItems","numOfCapturePerMonth","year"])),ge=Object(r.c)((function(e,t){return{calendarScheme:Object(I.c)(e,t),highlighted:Object(I.n)(e,t),highlightedDay:Object(I.o)(e,t),highlightedDayData:Object(I.q)(e,t),highlightedDayDataItems:Object(I.b)(e,t),numOfCapturePerMonth:Object(I.v)(e,t),year:Object(I.x)(e,t)}}),(function(e,t){return{onHoverDay:function(t){return e(Object(Y.b)(t))},onRollOutDay:function(t){return e(Object(Y.j)())}}}))(Oe),ve=a("BpHd"),Ce=a("20nU"),De=a("uz/6"),je=a("r77W"),Ne=function(e){var t=e.capture;return D.a.createElement("div",{className:"capture-details"},t&&D.a.createElement("div",null,D.a.createElement("a",{href:t.url,className:"capture-link"},t.caption),Object(je.a)(t.cl)?D.a.createElement("span",null," (why: No Collection Info)"):t.cl&&t.cl.length>0&&D.a.createElement("span",null," (why: ",t.cl.map((function(e){return D.a.createElement("a",{key:e,href:Ce.a.url_collection_details_page.replace("{{collection}}",e)},e)})).reduce((function(e,t){return[e,", ",t]})),")")))};Ne.propTypes={capture:v.a.object},Ne.displayName="CaptureDetails";var Ee,ke,we=D.a.memo(Ne),Re=a("xMho");function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=p()(e);if(t){var n=p()(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return m()(this,a)}}var Pe=(ke=function(e){l()(a,e);var t=xe(a);function a(e){var r;return u()(this,a),(r=t.call(this,e))._debounceOneYearCaptures=Object(ve.a)(Ce.a.calendar.captures_debounce_delay),r}return o()(a,[{key:"_fetchSelectedYearCaptures",value:function(){var e=this.props,t=e.capturesOfTheSelectedYearInProgress,a=e.hasCapturesOfTheSelectedYear,r=e.url,n=e.selected.year,u=e.typeOfGrid,c=e.onMissedYearCaptures;"annual"===u&&(a||t||this._debounceOneYearCaptures().then((function(){return c({url:r,year:n})})).catch(Object(ve.c)()))}},{key:"componentDidMount",value:function(){this._fetchSelectedYearCaptures()}},{key:"componentDidUpdate",value:function(e){e.url===this.props.url&&e.selected===this.props.selected||this._fetchSelectedYearCaptures()}},{key:"render",value:function(){var e=this.props,t=e.capturesOfTheSelectedYearInProgress,a=e.currentCapture,r=e.currentYearCapturesError,n=e.currentYearCapturesSummary,u=e.hasCapturesOfTheSelectedYear,c=e.typeOfGrid,o=e.url,i=e.onNextYear,l=e.onPreviousYear;return D.a.createElement("div",{className:"calendar-layout",onKeyUp:function(e){switch(e.key){case"ArrowLeft":l();break;case"ArrowRight":i()}},tabIndex:1},D.a.createElement(we,{capture:a}),"annual"===c?r?"string"==typeof r?D.a.createElement("div",{className:"calendar-container container"},D.a.createElement(De.a,{error:r,onRetry:this._fetchSelectedYearCaptures})):null:!u||t?D.a.createElement(G.b,{className:"loader-container"}):D.a.createElement(oe,null):D.a.createElement(ge,null),D.a.createElement(Re.a,{summary:n,url:o}))}}]),a}(D.a.PureComponent),f()(ke,"displayName","CalendarLayout"),f()(ke,"propTypes",{capturesOfTheSelectedYearInProgress:v.a.bool,currentCapture:v.a.object,currentYearCapturesError:v.a.oneOfType([v.a.object,v.a.string]),currentYearCapturesSummary:v.a.object,hasCapturesOfTheSelectedYear:v.a.bool,selected:v.a.object,typeOfGrid:v.a.string,url:v.a.string,onMissedYearCaptures:v.a.func.isRequired,onNextYear:v.a.func.isRequired,onPreviousYear:v.a.func.isRequired}),Ee=ke,b()(Ee.prototype,"_fetchSelectedYearCaptures",[O.bind],Object.getOwnPropertyDescriptor(Ee.prototype,"_fetchSelectedYearCaptures"),Ee.prototype),Ee),Ye=D.a.memo(Pe);t.default=Object(r.c)((function(e,t){return{capturesOfTheSelectedYearInProgress:Object(I.J)(e,t),currentCapture:Object(I.m)(e,t),currentYearCapturesError:Object(I.g)(e,t),currentYearCapturesSummary:Object(I.l)(e,t),hasCapturesOfTheSelectedYear:Object(I.C)(e,t),selected:Object(I.w)(e,t),url:H.l(e,t),typeOfGrid:Object(I.A)(e,t)}}),(function(e,t){return{onMissedYearCaptures:function(t){return e(Object(P.k)(t))},onNextYear:function(){return e(Object(Y.h)())},onPreviousYear:function(){return e(Object(Y.i)())}}}))(Ye)}}]);
//# sourceMappingURL=calendar.c075e800b3d46a1d2267.chunk.js.map
// @license-end
